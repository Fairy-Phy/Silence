const DiscordRPC = require('discord-rpc');
const ClientId = "430255668130349057";
const rpc = new DiscordRPC.Client({ transport: 'ipc' });
const startTimestamp = new Date();

module.exports = function(userID, userdetail, userstate, lrgImgKey, lrgImgTxt, smlImgKey, smlImgTxt) {
	async function setActivity() {
		if (!rpc) return;
		rpc.setActivity({
			details: userdetail,
			state: userstate,
			startTimestamp,
			largeImageKey: lrgImgKey,
			largeImageText: lrgImgTxt,
			smallImageKey: smlImgKey,
			smallImageText: smlImgTxt,
			instance: false,
		});
	}
}


rpc.on('ready', () => {
	setActivity();
});
rpc.login(ClientId).catch(console.error);